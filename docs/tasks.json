[
  {
    "id": "BE-001",
    "type": "backend",
    "title": "Auth Service - Phone OTP Login",
    "description": "Implement FastAPI endpoints for phone number login, OTP issuance, and verification with single-device binding enforcement. Persist device fingerprints and manage token issuance/refresh with revocation when a new device signs in.",
    "acceptance_criteria": "- /auth/request-otp accepts phone, rate limits to 1/min, persists hashed OTP\n- /auth/verify accepts phone+OTP, returns JWT bound to device_id, 200 on success\n- Old device tokens are revoked immediately when a new login completes",
    "priority": "P0",
    "prd_ref": "REQ-1.1",
    "status": "done",
    "dependencies": [],
    "file_path": "src/main/java/com/mingyu/app/AuthApplication.java, src/test/java/com/example/auth/controller/AuthControllerTest.java",
    "feedback": "Tests Passed."
  },
  {
    "id": "BE-002",
    "type": "backend",
    "title": "Device Binding & Unbind Service",
    "description": "Create APIs to register a device under a user, support forced unbind after data wipe, and enforce one active device per account. Include audit logs for unbind actions.",
    "acceptance_criteria": "- /device/bind stores device metadata and associates to user\n- Forced unbind endpoint clears telemetry data and flags audit entry\n- Conflicting bind attempts return 409 with remediation instructions",
    "priority": "P0",
    "prd_ref": "REQ-1.1",
    "status": "todo",
    "dependencies": [
      "BE-001"
    ]
  },
  {
    "id": "BE-003",
    "type": "backend",
    "title": "Relationship Binding Code Workflow",
    "description": "Build REST endpoints for generating 6-digit binding codes, validating them, and establishing 1:1 relationships with mutual confirmation plus single-sided forced release path.",
    "acceptance_criteria": "- /relationship/code returns unique 6-digit code, TTL 10 min\n- /relationship/bind accepts code+partner_id, ensures exclusivity, returns 201\n- Forced release endpoint wipes shared data and updates status with audit trail",
    "priority": "P0",
    "prd_ref": "REQ-1.2",
    "status": "todo",
    "dependencies": [
      "BE-001"
    ]
  },
  {
    "id": "BE-004",
    "type": "backend",
    "title": "Permission Telemetry Collector",
    "description": "Implement ingestion endpoints for clients to report permission states (location, notification, autostart, usage access). Store latest state snapshot per device with timestamps for monitoring.",
    "acceptance_criteria": "- /telemetry/permissions accepts structured payload, validates platform-specific fields\n- Latest status query returns up-to-date states within 5s of ingest\n- Missing updates >5 min trigger status=unknown flag for downstream use",
    "priority": "P0",
    "prd_ref": "REQ-2",
    "status": "todo",
    "dependencies": [
      "BE-002"
    ]
  },
  {
    "id": "BE-005",
    "type": "backend",
    "title": "Permission State Push Alert Worker",
    "description": "Create background worker to monitor permission changes and dispatch push notifications to monitoring partner within 60 seconds via notification provider.",
    "acceptance_criteria": "- Worker scans permission_change stream and enqueues push payloads within 10s\n- Notification delivery API called with Trace ID, success logged\n- SLA metric dashboard proves <60s latency for 95% of changes",
    "priority": "P0",
    "prd_ref": "REQ-2",
    "status": "todo",
    "dependencies": [
      "BE-004",
      "CF-002"
    ]
  },
  {
    "id": "BE-006",
    "type": "backend",
    "title": "Real-time Location Ingestion & Storage",
    "description": "Provide authenticated endpoints (REST + WebSocket) for clients to send GPS samples every minute or on geofence triggers. Persist to time-series storage with distance computation support.",
    "acceptance_criteria": "- /location/stream accepts batches, validates accuracy, stores with geo index\n- WebSocket ingest path accepts auth token, acknowledges frames with 200-level codes\n- API exposes latest coordinate + distance between partners in meters/km",
    "priority": "P0",
    "prd_ref": "REQ-3.1",
    "status": "todo",
    "dependencies": [
      "BE-002",
      "CF-002"
    ]
  },
  {
    "id": "BE-007",
    "type": "backend",
    "title": "Location Data Cleaning & Compression",
    "description": "Implement denoising pipeline (Kalman filter + speed caps) and delta compression before persisting location data to reduce noise and storage, ensuring clean input for inference modules.",
    "acceptance_criteria": "- Pipeline removes spikes (>150 km/h) and smooths jitter within 10m tolerance\n- Compressed payload size reduced by ≥30% compared to raw feed\n- Cleaned coordinates feed downstream topics without gap",
    "priority": "P0",
    "prd_ref": "REQ-3.1",
    "status": "todo",
    "dependencies": [
      "BE-006"
    ]
  },
  {
    "id": "BE-008",
    "type": "backend",
    "title": "Heartbeat & Status Monitor",
    "description": "Track device heartbeats and update relationship status (active, unknown) with notifications when no heartbeat for 5 minutes. Support configurable activity windows.",
    "acceptance_criteria": "- Heartbeat table records pings per device, TTL 5 min\n- Status transitions to unknown after 5 min gap and triggers push event\n- Monitoring API returns last heartbeat timestamp and derived status",
    "priority": "P0",
    "prd_ref": "REQ-6",
    "status": "todo",
    "dependencies": [
      "BE-004",
      "BE-006"
    ]
  },
  {
    "id": "BE-009",
    "type": "backend",
    "title": "Behavior & Audit Event Store",
    "description": "Design schemas and endpoints for storing trajectory replay, unlock events, app usage distribution, Lookus views, and sensitive action logs with querying APIs for dashboards.",
    "acceptance_criteria": "- Tables/indexes created for each audit event type with retention policy\n- Ingestion endpoints accept batched uploads with validation per metric\n- Query API returns paginated timelines for UI consumption in <500ms",
    "priority": "P1",
    "prd_ref": "REQ-4",
    "status": "todo",
    "dependencies": [
      "BE-006",
      "BE-012"
    ]
  },
  {
    "id": "BE-010",
    "type": "backend",
    "title": "Subscription & Entitlement Service",
    "description": "Implement plan catalog (monthly/quarterly/yearly), purchase receipt validation, entitlement checks, and automatic feature gating for premium audit functions.",
    "acceptance_criteria": "- /billing/plans returns plan metadata\n- /billing/verify processes App Store/Play billing receipts, updates entitlements\n- Feature flag middleware restricts premium APIs when entitlement absent",
    "priority": "P1",
    "prd_ref": "REQ-4.1",
    "status": "todo",
    "dependencies": [
      "BE-001"
    ]
  },
  {
    "id": "BE-011",
    "type": "backend",
    "title": "Emergency Alert Dispatch API",
    "description": "Expose endpoint for monitored user to trigger critical alert that bypasses silent mode using vendor-specific push priority and fallback SMS if push fails.",
    "acceptance_criteria": "- /emergency/alert requires auth, accepts message, returns 202\n- Push payload uses high-priority channel and logs vendor response\n- SMS fallback triggered when push not acknowledged in 5s",
    "priority": "P1",
    "prd_ref": "REQ-5",
    "status": "todo",
    "dependencies": [
      "BE-005"
    ]
  },
  {
    "id": "BE-012",
    "type": "backend",
    "title": "App Usage & Unlock Telemetry Ingestion",
    "description": "Implement Android-specific endpoints/service to receive unlock events, usage stats, and screen time per app; normalize and store for UI reporting.",
    "acceptance_criteria": "- /telemetry/usage accepts structured Android stats, validates timestamps\n- Unlock events recorded with device_id and UTC timestamp precision to seconds\n- Aggregation job outputs per-app usage totals per day",
    "priority": "P1",
    "prd_ref": "REQ-4.2",
    "status": "todo",
    "dependencies": [
      "BE-002"
    ]
  },
  {
    "id": "FE-001",
    "type": "frontend",
    "title": "Cross-platform OTP Login Flow",
    "description": "Implement mobile/web screens for phone number entry, OTP verification, and error handling. Bind device info after successful login and display single-device warning when needed.",
    "acceptance_criteria": "- UI matches design on iOS/Android/Web\n- OTP countdown, resend, and error states handled per spec\n- Successful login stores tokens securely and navigates to pairing flow",
    "priority": "P0",
    "prd_ref": "REQ-1.1",
    "status": "todo",
    "dependencies": [
      "BE-001"
    ]
  },
  {
    "id": "FE-002",
    "type": "frontend",
    "title": "Relationship Binding UI",
    "description": "Build UI for generating binding codes, sharing them, and entering partner codes with status feedback. Include forced release confirmation dialogue with data wipe notice.",
    "acceptance_criteria": "- Code display refreshes automatically with timer\n- Input validation and success/failure states handled\n- Forced release prompts double confirmation and shows final status",
    "priority": "P0",
    "prd_ref": "REQ-1.2",
    "status": "todo",
    "dependencies": [
      "BE-003"
    ]
  },
  {
    "id": "FE-003",
    "type": "frontend",
    "title": "Permission Theatre Onboarding Flow",
    "description": "Create guided multi-step experience explaining each permission (location, notifications, autostart, usage access) with rationale, platform-specific deep links, and completion checklist.",
    "acceptance_criteria": "- Flow lists steps sequentially with progress indicator\n- Each permission explanation screen matches copy/design and opens system settings\n- Completion screen reflects live permission status via telemetry API",
    "priority": "P0",
    "prd_ref": "REQ-2",
    "status": "todo",
    "dependencies": [
      "BE-004",
      "FE-001"
    ]
  },
  {
    "id": "FE-004",
    "type": "frontend",
    "title": "Permission Status Dashboard",
    "description": "Implement monitoring UI showing partner’s permission states, uninstall detection, and push warning banner when state turns off. Subscribe to push/WebSocket updates for <60s refresh.",
    "acceptance_criteria": "- Dashboard shows live indicators for location, notifications, autostart, usage access\n- State change reflected within 1 minute of backend update\n- Push notifications deep link to dashboard with highlighted issue",
    "priority": "P0",
    "prd_ref": "REQ-2",
    "status": "todo",
    "dependencies": [
      "BE-004",
      "BE-005",
      "CF-002"
    ]
  },
  {
    "id": "FE-005",
    "type": "frontend",
    "title": "Real-time Map & Distance View",
    "description": "Develop map screen with standard/satellite toggle, live position markers for both users, and automatic unit switching (meters/kilometers). Integrate WebSocket feed for smooth updates.",
    "acceptance_criteria": "- Map renders both markers and updates every minute or on push\n- Toggle switches between map types without reload\n- Distance label auto-switches units based on value thresholds",
    "priority": "P0",
    "prd_ref": "REQ-3.1",
    "status": "todo",
    "dependencies": [
      "BE-006",
      "CF-002"
    ]
  },
  {
    "id": "FE-006",
    "type": "frontend",
    "title": "Device Status & Battery Panel",
    "description": "Create UI components showing partner battery (±10%), network state (WiFi name/4G/5G), and last heartbeat times with warning states when stale.",
    "acceptance_criteria": "- Battery displayed with percentage and warning color when <15%\n- Network indicator shows WiFi SSID or cellular state\n- Heartbeat timer updates every second and shows 'Unknown' after 5 min gap",
    "priority": "P0",
    "prd_ref": "REQ-3.2",
    "status": "todo",
    "dependencies": [
      "BE-006",
      "BE-008"
    ]
  },
  {
    "id": "FE-007",
    "type": "frontend",
    "title": "Auto Behavior Notification Center",
    "description": "Implement UI list for location arrival/departure, travel state updates, and safety reminders with filters. Support deep links from push notifications.",
    "acceptance_criteria": "- Feed displays behavior entries with timestamp and icon\n- Filters by category (location, motion, safety) work without reload\n- Push deep links open feed and highlight referenced item",
    "priority": "P0",
    "prd_ref": "REQ-3.3",
    "status": "todo",
    "dependencies": [
      "AL-001",
      "AL-002",
      "BE-005"
    ]
  },
  {
    "id": "FE-008",
    "type": "frontend",
    "title": "Premium Paywall & Entitlement UI",
    "description": "Design and implement subscription purchase screens with plan comparison, localized pricing, and entitlement state indicators gating premium features.",
    "acceptance_criteria": "- Paywall lists monthly/quarterly/yearly plans with localized currency\n- Purchases trigger platform billing flows and show success/failure states\n- Premium-only modules are visually locked until entitlement confirmed",
    "priority": "P1",
    "prd_ref": "REQ-4.1",
    "status": "todo",
    "dependencies": [
      "BE-010"
    ]
  },
  {
    "id": "FE-009",
    "type": "frontend",
    "title": "Audit & Trajectory Replay Screens",
    "description": "Build UI for timeline of location tracks, speed, stop durations, unlock counts, screen time charts, and Lookus records with date filters and playback controls.",
    "acceptance_criteria": "- Trajectory map replays movement with scrubbable timeline\n- Unlock and usage charts render per day with totals\n- Sensitive action logs list events chronologically with source labels",
    "priority": "P1",
    "prd_ref": "REQ-4",
    "status": "todo",
    "dependencies": [
      "BE-009",
      "FE-005"
    ]
  },
  {
    "id": "FE-010",
    "type": "frontend",
    "title": "Emergency Alert UI",
    "description": "Provide dedicated emergency button with confirmation modal allowing optional message; handles alert in-progress state and success/failure feedback.",
    "acceptance_criteria": "- Button available on dashboard with guard confirmation\n- Sending shows spinner until backend acknowledgement\n- Errors display retry guidance and logs to analytics",
    "priority": "P1",
    "prd_ref": "REQ-5",
    "status": "todo",
    "dependencies": [
      "BE-011"
    ]
  },
  {
    "id": "AL-001",
    "type": "algorithm",
    "title": "Geofence & Arrival/Departure Detection",
    "description": "Implement geofence engine that tracks predefined places (home, office) and emits arrival/departure events using cleaned location stream with configurable radius and dwell thresholds.",
    "acceptance_criteria": "- Arrival fired when user stays within radius for dwell_time\n- Departure fired when user leaves radius for >2 minutes\n- False positives under 5% in QA dataset",
    "priority": "P0",
    "prd_ref": "REQ-3.3",
    "status": "todo",
    "dependencies": [
      "BE-007"
    ]
  },
  {
    "id": "AL-002",
    "type": "algorithm",
    "title": "Motion State & Commute Detection",
    "description": "Create acceleration/speed-based classifier to label motion states (in-vehicle, on foot, stationary) and trigger 'boarding/exiting/active' notifications leveraging cleaned data.",
    "acceptance_criteria": "- Classifier accuracy ≥85% on validation data\n- State transitions emitted with debounce logic to avoid flapping\n- Outputs published to behavior topic for push worker",
    "priority": "P0",
    "prd_ref": "REQ-3.3",
    "status": "todo",
    "dependencies": [
      "BE-007"
    ]
  },
  {
    "id": "AL-003",
    "type": "algorithm",
    "title": "Daily Safety Summary Generator",
    "description": "Implement job that aggregates trajectory and behavior events to produce daily 'Safe' summaries aligned with typical routines, highlighting deviations.",
    "acceptance_criteria": "- Summary combines key metrics (locations visited, travel duration, anomalies)\n- Generated once per day per relationship and stored for UI retrieval\n- Deviations flagged when time/location differ from historical baseline",
    "priority": "P1",
    "prd_ref": "REQ-3.3",
    "status": "todo",
    "dependencies": [
      "AL-001",
      "AL-002",
      "BE-008"
    ]
  },
  {
    "id": "CF-001",
    "type": "config",
    "title": "Observability & Traceability Setup",
    "description": "Integrate structured logging, distributed tracing (Trace IDs propagated through FastAPI, workers, push provider), and metrics dashboards (latency, error rates, heartbeat SLA).",
    "acceptance_criteria": "- Trace ID injected in every request/WS frame and logged across services\n- Metrics exported to dashboard with alerts on error spikes and heartbeat misses\n- Log retention policy applied with searchable structured logs",
    "priority": "P0",
    "prd_ref": "REQ-6",
    "status": "todo",
    "dependencies": []
  },
  {
    "id": "CF-002",
    "type": "config",
    "title": "Real-time Channel Infrastructure",
    "description": "Deploy and configure WebSocket/MQTT broker (e.g., FastAPI WS + Redis pub/sub) with auto-scaling, authentication, and fallback to push when offline to meet <60s latency goals.",
    "acceptance_criteria": "- WebSocket endpoints handle 1 message/min per device with auth checks\n- Health checks and auto-scaling rules defined for broker pods\n- Offline detection triggers push fallback path within 60s",
    "priority": "P0",
    "prd_ref": "REQ-3",
    "status": "todo",
    "dependencies": [
      "CF-001"
    ]
  },
  {
    "id": "CF-003",
    "type": "config",
    "title": "Background Job Scheduler & Queue Setup",
    "description": "Configure task queue (Celery/RQ) for permission alerts, data cleaning, behavior inference, and summary generation with retry policies and monitoring hooks.",
    "acceptance_criteria": "- Queue deployed with worker autoscaling and retry/backoff policies\n- Jobs instrumented with Trace IDs and surfaced in monitoring dashboards\n- Failure alerts configured when retries exceed threshold",
    "priority": "P0",
    "prd_ref": "REQ-6",
    "status": "todo",
    "dependencies": [
      "CF-001"
    ]
  }
]